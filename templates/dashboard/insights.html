{% extends 'dashboard/base.html' %}

{% block title %}Insights - Dashboard{% endblock %}

{% block dashboard_content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="h3 fw-bold">Insights</h1>
</div>

<!-- low stock alert -->
{% if low_stock_items %}
<div class="alert alert-warning">
    <h5 class="mb-1">Low stock products</h5>
    <ul class="mb-0">
        {% for p in low_stock_items %}
        <li>{{ p.name }} ({{ p.stock }} left)</li>
        {% endfor %}
    </ul>
</div>
{% else %}
<div class="alert alert-success">All products are sufficiently stocked.</div>
{% endif %}

<!-- category revenue -->
<div class="card border-0 shadow-sm p-4 mt-4">
    <h5 class="fw-bold mb-3">Revenue by Category</h5>
    <table class="table table-sm">
        <thead>
            <tr><th>Category</th><th>Total</th></tr>
        </thead>
        <tbody>
            {% for row in category_revenue %}
            <tr><td>{{ row.category|default:'Uncategorized' }}</td><td>${{ row.total }}</td></tr>
            {% empty %}
            <tr><td colspan="2" class="text-center">No sales yet</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
